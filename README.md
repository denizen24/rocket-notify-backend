## Описание проекта
### Версия для использования одному аккаунту рокетчата, скрипт можно запустить локально
`rocket-notify-backend` — сервис на NestJS, который периодически опрашивает Rocket.Chat и отправляет уведомления о росте числа непрочитанных сообщений в Telegram‑канал через телеграмм бота, можно выбрать любой канал, главное указать его ID. Проект предназначен для фонового мониторинга, без пользовательского UI. Создан в виду того что в бесплатной версии Rocket.Chat есть ограничения по уведомлениям и мобильные клиенты не получают уведомлений из чатов.

## Основная логика

- Сервис использует `ROCKET_CHAT_ID_USER` и `ROCKET_CHAT_TOKEN` из окружения.
- Запросы к Rocket.Chat выполняются с заголовками `X-User-Id` и `X-Auth-Token`.
- Список подписок берётся одним запросом: `GET /api/v1/subscriptions.get`.
- Непрочитанные считаются по подпискам (личные — на данный момент корректно считает только личные сообщения).
- При увеличении общего количества непрочитанных отправляется сообщение в Telegram.

## Архитектура и модули

- `AppModule` — корневой модуль приложения.
- `TelegramModule` — отправка уведомлений через Telegram Bot API.
- `TelegramService` валидирует обязательные env при старте.
- `RocketChatModule` — взаимодействие с Rocket.Chat и polling.
- `RocketChatService` — авторизация, запрос подписок, подсчёт непрочитанных.
- `RocketChatPollingService` — периодический опрос и триггер уведомлений.

## Конфигурация (env)

Все чувствительные параметры берутся из переменных окружения:

- `ROCKET_CHAT_URL` — базовый URL Rocket.Chat.
- `ROCKET_CHAT_ID_USER` — идентификатор пользователя Rocket.Chat (для API).
- `ROCKET_CHAT_TOKEN` — токен пользователя Rocket.Chat (для API).
- `POLLING_INTERVAL_MIN` — интервал опроса в минутах.
- `TELEGRAM_BOT_TOKEN` — токен Telegram‑бота.
- `TELEGRAM_CHANNEL_ID` — ID канала/чата.

## Технологии

- NestJS 11
- Axios
- TypeScript

## Запуск

- `npm run start:dev` — разработка
- `npm run start:prod` — production
- `npm run lint` — линтер

## Примечания

- Интервал polling берётся из `POLLING_INTERVAL_MIN` с дефолтом 5 минут.
- Токен и ID пользователя Rocket.Chat берутся из переменных окружения.
- В `TelegramModule` подключён `ConfigModule`, чтобы `ConfigService` был доступен сервису.